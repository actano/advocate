language: node_js
node_js:
- 6.11.1
after_success:
- cat ./coverage/lcov.info | ./node_modules/.bin/coveralls

cache:
  yarn: true

# Greenkeeper update lockfile
env:
  global:
    secure: MFu+i9BnaWpmsZlg7J681wd7xP/zHs6GpBGwnztxTPiCt3MWKrmLVJMcCWUKFZ83dmvQS1oP/uz/rEg06XsadG7luQlJH5pXKnymPiCq9mPqtuj/gxZNhZPPzW5ziEHZpWRkyeyHX3YbyapiLzNGoT4zdvULaT7VszUiJzbaoO5bYCn2cGB9suTJaVGHPdc0qFWqdsI+zU5i0Xq/M1/hi87rX/osyR0jlqp9hpmWFM5aaoWUCdnPhpOIt1BHrtFLbD+cuJlmbY80NTFrgvZ1jC2qdNn1TFuKe4SXSImuQnxjGjRP6N1bbwbmEaby11KxkHWBvDYLzDXQnaZ3joyq/7uAPTi+l4w7bF65mjmjauNwsfkk5GYGAKqAuaklVmD6grRvaKsX9MGdnDQarAihFBv0lx8TmlL7/wxhAT0qBUcX25kRQGWAKqMPcZnETM2GXhsdn/FEwIsp+8nA8NNQAmoUwKpPNkAKtsuTv4bRFxCA2GvIATqGtLdwKpgTnCHC4zWUdZ55yPxWDs7JLH9vdsQ9w9p4f/9okqn9IHh97uYM3yHZebl4sxKm6rn7j+KYwsbvksmf7IlZQ8meXVObMZhDm+sHido+VzLeVuCPdvuh4GFKoS0/EeMckQ7lXuidDzMhdouB9sGb3QqpLvZpyIdxqc8cmWFwVr4c+Qz9LX8=
before_install: yarn global add greenkeeper-lockfile@1
before_script: greenkeeper-lockfile-update
script:
- yarn run test
after_script: greenkeeper-lockfile-upload

deploy:
  provider: npm
  email: marcus.mennemeier@actano.de
  api_key:
    secure: DBOTRk4Mj/2B9iOVREg5jdUt9MwYw8uUqAB0dGHjYYFtQdOQ2ga7nYZxhbOqzOdyUlbG1Oz20AKCMzmyFNxQJu7/xq8WYTwYjbFqUR6Bs3qfqc8vv95ulASTmLvBMz0M1Xaj7bPGjkaM9I5CkwZUbkh9MJVS6RxvuitTqVVI8BxLi0ETJUrIA4SM6fK2A7DHXWzgyCpZefbIxZ+5zAMb8nN/wVtmGFEe99ftreVhmeQ90KZ0jopa5u/kNmfCrec1CW+FC4KWR0rtlEbHwaWgnWGoCFlwFVrLMvxLxJqs0NVFfODuatjStuARAjDzUal7v2moO5aorJFy9EeSdwDU90TZAxIozR2Stu31Dblk2VMzjHoPf7KQDlMU8YimwQoSPE2CghCvW0ywr6UwfqlG0iL264fR1APG6/b2lN7rEXufP7Zrv8Hsffk6220vSe9uJRKA5vEd1boBm70eVdokMdjC52ZS3u++nqg1ZtuHSCDJxJPVQ/wLNvGWbpjPI9Bnr5rptnyXx/TWWJ8cZ5HUX7yNOduQB3njedrzQ+U5tbg5+5h8BF8jHL46doocc68s4BbP2JJSoj5pGyBm0dD+/kbPZZfxCZSZ5lKvIWzyVbrdroWcNEFI4dRKjvkqGr5XECw2cFxhIi3F+q9xcnR1sXyv5yAjkA+qeUY2pufLKrM=
  on:
    tags: true
    repo: actano/advocate
